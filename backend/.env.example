# --- Server Config ---
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=true
LOG_LEVEL=INFO
ALLOWED_ORIGINS=["http://localhost:5173"]

# --- Database (MongoDB Atlas) ---
MONGO_URI=mongodb+srv://<user>:<password>@<cluster>.mongodb.net/?appName=Cluster0
MONGO_DB=legal_db
MONGO_COLLECTION_CHUNKS=legal_chunks_v1

# --- LLM Provider (Groq) ---
LLM_PROVIDER=groq
LLM_API_KEY=your_llm_api_key_here
LLM_MODEL=llama-3.3-70b-versatile
# LLM_PROVIDER=openai
# LLM_API_KEY=your_openai_api_key_here
# LLM_MODEL=gpt-4o-mini
LLM_TEMPERATURE=0.0
LLM_MAX_TOKENS=4096

# --- Embedding Provider (Mistral) ---
# Options: mistral, openai
EMBED_PROVIDER=mistral
EMBED_API_KEY=your_embed_api_key_here
EMBED_MODEL=mistral-embed
EMBED_DIMENSION=1024

# --- Ingestion Settings ---
DOC_MAX_FILE_SIZE_MB=25
INGESTION_MAX_RETRIES=3
INGESTION_BATCH_SIZE=10

# --- Judgment Processing (Groq) ---
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=llama-3.1-8b-instant
GROQ_TEMPERATURE=0.0
FUZZY_MATCH_THRESHOLD=0.60
JUDGMENT_OUTPUT_DIR=data/judgments

# ============================================
# HYBRID SEARCH RETRIEVAL PIPELINE
# ============================================

# MongoDB Atlas Search Index Names
VECTOR_INDEX_NAME=vector_index
TEXT_INDEX_NAME=text_index

# Vector Search Configuration
VECTOR_SEARCH_TOP_K=100
VECTOR_MIN_SCORE=0.5

# Keyword Search Configuration  
KEYWORD_SEARCH_TOP_K=100
KEYWORD_MIN_SCORE=0.3

# Hybrid Search - Final threshold after fusion/normalization
HYBRID_MIN_SCORE=0.3

# Deduplication Strategy
DEDUP_METHOD=id
DEDUP_SIMILARITY_THRESHOLD=0.95

# Reranking Configuration
USE_COHERE_RERANK=true
COHERE_API_KEY=your_cohere_api_key_here
COHERE_RERANK_MODEL=rerank-english-v3.0
COHERE_RERANK_TOP_N=50

USE_LLM_RERANK=true
LLM_RERANK_PROVIDER=groq
LLM_RERANK_API_KEY=your_llm_rerank_api_key_here
LLM_RERANK_MODEL=llama-3.3-70b-versatile
LLM_RERANK_TEMPERATURE=0.0
LLM_RERANK_TOP_N=50

# Score Fusion Weights
VECTOR_SCORE_WEIGHT=0.5
KEYWORD_SCORE_WEIGHT=0.5

# Query Expansion (Future - not implemented yet)
# ENABLE_QUERY_EXPANSION=false
# QUERY_EXPANSION_METHOD=llm

# --- Chat Configuration ---
CHAT_RETRIEVAL_TOP_K=50

# --- Viability Predictor Configuration ---
VIABILITY_RETRIEVAL_TOP_K=50
VIABILITY_RERANK_TOP_N=20
VIABILITY_MIN_SCORE=0.60
VIABILITY_HIGH_PROB_THRESHOLD=0.70
VIABILITY_LOW_PROB_THRESHOLD=0.40
